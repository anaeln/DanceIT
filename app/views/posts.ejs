<style>  
.center-content {
  display: flex;
  flex-direction: column;
  align-items: center; 
  text-align: center; 
}

.post-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  align-items: flex-start; /* Align posts to the top of the container */
}

.create-post {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 20px;
    background-color: #f8f8f8;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease-in-out;
    width: 500px;
    
}
/* Style for each individual post */
.post {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 20px;
  background-color: #f8f8f8;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease-in-out;
}
.post img {
  display: block;
  max-width: 100%;
  max-height: 200px; 
  margin: 0 auto; 
  transition: transform 0.3s ease-in-out; 
}

.delete-post-form {
  display: inline-block;
  margin: 0;
  right: -260px;
  top: 6px;
  position: relative;
}

.btn-delete {
  background-color: transparent;
  border: none;
  cursor: pointer;
}
</style>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
<script>
  $(document).ready(function() {
    $('[data-toggle="tooltip"]').tooltip();
  });
</script>





<!-- Create post -->
<div class="post-container">
<form action="/posts/create" method="post" enctype="multipart/form-data">
  <div class="create-post center-content">
    <div>
      <h3>Make your own post</h3>
    <input type="text" class="form-control" id="postContent" name="postContent" for="postContent" placeholder="Write your post here...">
    <div>
      <input class="form-control" type="file" id="image" name="image" />
    </div>
    <button type="submit" class="btn btn-primary">Create</button>
  </div>
  </div>
</form>
</div>

<!-- Get all posts -->
<div class="post-container ">
  <% if (posts && posts.length > 0) { %>
    <% posts.forEach(post => { %>
      <div class="post">
        <p><strong><%= post.postContent %></strong></p>
        <div>
          <img
          src="data:<%= post.img.contentType %>;base64, <%= post.img.data.toString('base64') %>"
          alt="Post Image"
          width="200" 
          height="200"
        />
        </div>
        <p><strong>Publish Time:</strong> <%= new Date(post.publishTime).toLocaleString('en-US', { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric', 
          hour: 'numeric', 
          minute: 'numeric', 
          second: 'numeric' 
        }) %></p>
         <!--Delete post -->
         <form action="/posts/delete/<%= post._id %>" method="post" class="delete-post-form">
           <button type="submit" class="btn btn-light btn-delete" data-toggle="tooltip" data-placement="top" title="Delete post">
            <i class="bi bi-trash"></i>
          </button>
          <div class="hidden-post-id" data-post-id="<%= post._id %>"></div>
         </form>

         <!-- Update Post -->
          <form action="/posts/update/<%= post._id %>" method="post">
            <div class="form-group">
              <label for="postContent">Post Content</label>
              <input type="text" class="form-control" id="postContent" name="postContent" value="<%= post.postContent %>">
              <!-- <div class="hidden-post-id" data-post-id="<%= post._id %>"></div> -->
            </div>
            <button type="submit" class="btn btn-primary">Update Post</button>
          </form>
      </div>

    <% }); %>
  <% } else { %>
    <p><strong>No posts available yet</strong></p>
  <% } %>
</div>
