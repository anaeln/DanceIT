<!doctype html>
<html lang="en">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    #map{
        height: 600px;
        width: 100%
    }
</style>
<body>
    <div class="container" id="studiosList">
        <ol>
            <% for (let i = 0; i < studios.length; i++) { %>
                <li><%= studios[i].Coords %></li>
            <% } %>
        </ol>
    </div>
    <div class="container" id="map">
    </div>


   <script>
       const studios = '<%- JSON.stringify(studios) %>';
       const parsedStudios = JSON.parse(studios);
      function initMap()
       {
           var options = {
               zoom:13,
               center:{lat:31.795661077000744, lng:34.64098490948224}
           }
           var map = new google.maps.Map(document.getElementById('map'), options)
           function addMarker(props) {
               var marker = new google.maps.Marker({
                   position: {lat: props.Coords[0], lng:props.Coords[1]},
                   map: map,
               });
               var infoWindow = new google.maps.InfoWindow({
                   content:props.studioName
               });

               marker.addListener('click', function (){
                   infoWindow.open(map, marker);
               });
            }
            for(var i=0; i<parsedStudios.length; i++){
                console.log(parsedStudios[i]);
               addMarker(parsedStudios[i]);
           }
       }
   </script>
    <script async
            src="https://maps.googleapis.com/maps/api/js?key=<%= apiKey %>&callback=initMap">
    </script>
</body>
</html>















