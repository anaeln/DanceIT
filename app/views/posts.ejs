<style>
  .center-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .post-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    align-items: flex-start;
    /* Align posts to the top of the container */
  }

  .create-post {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 20px;
    background-color: #f8f8f8;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease-in-out;
    width: 500px;

  }

  /* Style for each individual post */
  .post {
    position: relative;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 20px;
    background-color: #f8f8f8;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease-in-out;
  }

  .post img {
    display: block;
    max-width: 100%;
    max-height: 200px;
    margin: 0 auto;
    transition: transform 0.3s ease-in-out;
  }

  .delete-post-form {
    display: inline-block;
    position: relative;
  }

  .btn-delete {
    position: absolute;
    border: none;
    cursor: pointer;
  }

  .btn-update {
    position: absolute;
    top: 5px;
    right: 5px;
    border: none;
    cursor: pointer;
  }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
  // for hover into delete and update
  $(document).ready(function () {
    $('[data-toggle="tooltip"]').tooltip();
  });


</script>


<!-- Create post -->
<div class="post-container">
  <form action="/posts/create" method="post" enctype="multipart/form-data">
    <div class="create-post center-content">
      <div>
        <h3>Make your own post</h3>
        <input type="text" class="form-control" id="postContent" name="postContent" for="postContent"
          placeholder="Write your post here...">
        <div>
          <input class="form-control" type="file" id="image" name="image" />
        </div>
        <button type="submit" class="btn btn-primary">Create</button>
      </div>
    </div>
  </form>
</div>

<!-- Get all posts -->
<div class="post-container ">
  <% if (posts && posts.length> 0) { %>
    <% posts.forEach(post=> { %>
      <div class="post">
        <p><strong>
            <%= post.postContent %>
          </strong></p>
        <div>
          <img src="data:<%= post.img.contentType %>;base64, <%= post.img.data.toString('base64') %>" alt="Post Image"
            width="200" height="200" />
        </div>
        <p><strong>Publish Time:</strong>
          <%= new Date(post.publishTime).toLocaleString('en-US', { year: 'numeric' , month: 'long' , day: 'numeric' ,
            hour: 'numeric' , minute: 'numeric' , second: 'numeric' }) %>
        </p>

        <!--Delete post -->
        <form action="/posts/delete/<%= post._id %>" method="post" class="delete-post-form">
          <button type="submit" class="btn btn-light btn-delete" data-toggle="tooltip" data-placement="top"
            title="Delete post">
            <i class="bi bi-trash"></i>
          </button>
        </form>

        <!-- Update post -->
        <button class="btn btn-light btn-update" data-toggle="modal" data-target="#editModal-<%= post._id %>"
          data-toggle="tooltip" data-placement="top" title="Edit post">
          <i class="bi bi-pen fill"></i>
        </button>0
        <div class="modal fade" id="editModal-<%= post._id %>" tabindex="-1" role="dialog"
          aria-labelledby="editModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Edit your Post</h5>
              </div>
              <div class="modal-body">
                <form action="/posts/update/<%= post._id %>" method="post" enctype="multipart/form-data">
                  <div class="form-group">
                    <label for="editedContent">Post Content</label>
                    <input type="text" class="form-control" id="editedContent" name="editedContent" for="editedContent"
                      placeholder="<%= post.postContent %>">
                    <label for="image">Post media</label>
                    <input type="file" class="form-control" id="image" name="image" />
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="saveChanges">Save changes</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>


      <% }); %>
        <% } else { %>
          <p><strong>No posts available yet</strong></p>
          <% } %>
</div>